(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[41],{5453:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Next.js/02-data-fetching/02-01-fetching-caching-and-revalidating",function(){return n(3751)}])},3751:function(e,s,n){"use strict";n.r(s),n.d(s,{__toc:function(){return a}});var r=n(5893),i=n(2673),t=n(9298),l=n(9812);n(6834);var o=n(2643);let a=[{depth:2,value:"Fetching Data on the Server with fetch",id:"fetching-data-on-the-server-with-fetch"},{depth:3,value:"Caching Data",id:"caching-data"},{depth:3,value:"Revalidating Data",id:"revalidating-data"},{depth:4,value:"Time-based Revalidation",id:"time-based-revalidation"},{depth:4,value:"On-demand Revalidation",id:"on-demand-revalidation"},{depth:4,value:"Error handling and revalidation",id:"error-handling-and-revalidation"},{depth:3,value:"Opting out of Data Caching",id:"opting-out-of-data-caching"},{depth:4,value:"Individual fetch Requests",id:"individual-fetch-requests"},{depth:4,value:"Multiple fetch Requests",id:"multiple-fetch-requests"},{depth:2,value:"Fetching data on the Server with third-party libraries",id:"fetching-data-on-the-server-with-third-party-libraries"},{depth:3,value:"Example",id:"example"},{depth:2,value:"Fetching Data on the Client with Route Handlers",id:"fetching-data-on-the-client-with-route-handlers"},{depth:2,value:"Fetching Data on the Client with third-party libraries",id:"fetching-data-on-the-client-with-third-party-libraries"}];function _createMdxContent(e){let s=Object.assign({h1:"h1",p:"p",ol:"ol",li:"li",a:"a",code:"code",h2:"h2",pre:"pre",span:"span",blockquote:"blockquote",strong:"strong",ul:"ul",h3:"h3",h4:"h4"},(0,o.a)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h1,{children:"Data Fetching, Caching, and Revalidating"}),"\n",(0,r.jsx)(s.p,{children:"Data fetching หรือการดึงข้อมูล เป็นส่วนสำคัญของทุกๆแอปพลิเคชัน ในบทนี้จะอธิบายถึงวิธีการ ดึงข้อมูล(fetch data) การจัดเก็บข้อมูลในแคช(cache) และการตรวจสอบความถูกต้องของข้อมูล (revalidate data) ใน React and Next.js."}),"\n",(0,r.jsx)(s.p,{children:"การดึงข้อมูลมีทั้งหมด 4 วิธี คือ"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsxs)(s.a,{href:"#fetching-data-on-the-server-with-fetch",children:["บน server ด้วยการใช้ ",(0,r.jsx)(s.code,{children:"fetch"})]})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#fetching-data-on-the-server-with-third-party-libraries",children:"บน server ด้วยการใช้ libraries ภายนอก"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#fetching-data-on-the-client-with-route-handlers",children:"บน client ผ่าน Route Handler"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#fetching-data-on-the-client-with-route-handlers",children:"บน client ด้วย libraries ภายนอก"})}),"\n"]}),"\n",(0,r.jsxs)(s.h2,{id:"fetching-data-on-the-server-with-fetch",children:["Fetching Data on the Server with ",(0,r.jsx)(s.code,{children:"fetch"})]}),"\n",(0,r.jsxs)(s.p,{children:["การดึงข้อมูลบน server ด้วยการใช้ ",(0,r.jsx)(s.code,{children:"fetch"})]}),"\n",(0,r.jsxs)(s.p,{children:["Next.js เราสามารถกำหนดการทำงานของ ",(0,r.jsxs)(s.a,{href:"https://developer.mozilla.org/docs/Web/API/Fetch_API",children:[(0,r.jsx)(s.code,{children:"fetch"})," Web API"]})," เพื่อกำหนดวิธีการเก็บข้อมูลใน ",(0,r.jsx)(s.a,{href:"#caching-data",children:"caching"})," และ ",(0,r.jsx)(s.a,{href:"#revalidating-data",children:"revalidating"})," สำหรับการทำ fetch request แต่ละครั้งบน server แต่ใน React เมื่อ ",(0,r.jsx)(s.code,{children:"fetch"})," ได้ทำการ request จะทำการเก็บข้อมูลโดยอัตโนมัติ ",(0,r.jsx)(s.a,{href:"/docs/app/building-your-application/data-fetching/patterns#fetching-data-where-its-needed",children:"memoize"})," ระหว่างการ render โครงสร้างของ React component"]}),"\n",(0,r.jsxs)(s.p,{children:["เราสามารถใช้ ",(0,r.jsx)(s.code,{children:"fetch"})," ร่วมกับ ",(0,r.jsx)(s.code,{children:"async"}),"/",(0,r.jsx)(s.code,{children:"await"})," ใน Server Components ใน ",(0,r.jsx)(s.a,{href:"/Next.js/01-Routing/01-11-Route-Handlers",children:"Route Handlers"})," และใน ",(0,r.jsx)(s.a,{href:"/docs/app/building-your-application/data-fetching/server-actions-and-mutations",children:"Server Actions"})," ได้"]}),"\n",(0,r.jsx)(s.p,{children:"ตัวอย่าง เช่น"}),"\n",(0,r.jsx)(s.pre,{"data-language":"tsx","data-theme":"default",filename:"app/page.tsx",children:(0,r.jsxs)(s.code,{"data-language":"tsx","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"async"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"getData"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"() {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"res"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"fetch"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"https://api.example.com/..."'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// The return value is *not* serialized"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// You can return Date, Map, Set, etc."})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"res"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:".ok) {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// This will activate the closest `error.js` Error Boundary"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"throw"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"new"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Error"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Failed to fetch data"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"res"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".json"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"default"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"async"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Page"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"() {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"data"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"getData"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"main"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"></"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"main"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:">;"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.pre,{"data-language":"jsx","data-theme":"default",filename:"app/page.js",children:(0,r.jsxs)(s.code,{"data-language":"jsx","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"async"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"getData"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"() {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"res"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"fetch"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"https://api.example.com/..."'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// The return value is *not* serialized"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// You can return Date, Map, Set, etc."})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"res"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:".ok) {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// This will activate the closest `error.js` Error Boundary"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"throw"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"new"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Error"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Failed to fetch data"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"res"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".json"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"default"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"async"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Page"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"() {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"data"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"getData"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"main"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"></"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"main"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:">;"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"สิ่งที่ควรรู้"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Next.js มีฟังก์ชันในการทำงานที่มีประโยชน์เมื่อเรา fetching data ใน Server Components เช่น ",(0,r.jsx)(s.a,{href:"/docs/app/api-reference/functions/cookies",children:(0,r.jsx)(s.code,{children:"cookies"})})," และ ",(0,r.jsx)(s.a,{href:"/docs/app/api-reference/functions/headers",children:(0,r.jsx)(s.code,{children:"headers"})})," ซึ่งทำให้สามารถ render dynamic route ได้"]}),"\n",(0,r.jsxs)(s.li,{children:["ใน Route handlers การทำ ",(0,r.jsx)(s.code,{children:"fetch"})," requests จะไม่ถูกเก็บค่าไว้ในหน่วยความจำเนื่องจาก Router handlers ไม่ได้เป็นส่วนหนึ่งของ Component tree"]}),"\n",(0,r.jsxs)(s.li,{children:["การใช้ ",(0,r.jsx)(s.code,{children:"async"}),"/",(0,r.jsx)(s.code,{children:"await"})," ใน Server Component แบบ TypeScript จะสามารถใช้ได้ใน TypeScript ",(0,r.jsx)(s.code,{children:"5.1.3"})," หรือสูงกว่า และ ",(0,r.jsx)(s.code,{children:"@types/react"})," ",(0,r.jsx)(s.code,{children:"18.2.8"})," หรือสูงกว่า"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"caching-data",children:"Caching Data"}),"\n",(0,r.jsx)(s.p,{children:"การทำ Caching เพื่อเก็บข้อมูล ทำให้เราไม่ต้องดึงข้อมูลใหม่จากแหล่งข้อมูลในทุกครั้งที่มีคำขอเข้ามา"}),"\n",(0,r.jsxs)(s.p,{children:["ค่าเริ่มต้นของ Next.js จะทำการ caches เก็บข้อมูลโดยอัตโนมัติ เมื่อมีการ ",(0,r.jsx)(s.code,{children:"fetch"})," ใน ",(0,r.jsx)(s.a,{href:"/docs/app/building-your-application/caching#data-cache",children:"Data Cache"})," บน server นั่นคือเราสามารถดึงข้อมูลขณะ build time หรือ request time เพื่อเก็บไว้ใน cached และนำข้อมูลนั้นมาใช้ซ้ำเมื่อมีการ request เข้ามา"]}),"\n",(0,r.jsx)(s.pre,{"data-language":"js","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"js","data-theme":"default",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// 'force-cache' is the default, and can be omitted"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"fetch"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"https://..."'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { cache"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"force-cache"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" });"})]})]})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"fetch"})," requests ที่ใช้ method ",(0,r.jsx)(s.code,{children:"POST"})," ก็จะถูกเก็บไว้โดยอัตโนมัติด้วยเช่นกัน ยกเว้นว่ามันอยู่ใน ",(0,r.jsx)(s.a,{href:"/Next.js/01-Routing/01-11-Route-Handlerss",children:"Route Handler"})," ที่ใช้ method ",(0,r.jsx)(s.code,{children:"POST"})," จะไม่ถูกเก็บแคชเก็บไว้"]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"What is the Data Cache?"})}),"\n",(0,r.jsxs)(s.p,{children:["The Data Cache is a persistent ",(0,r.jsx)(s.a,{href:"https://developer.mozilla.org/docs/Web/HTTP/Caching",children:"HTTP cache"})," ขนาดของ cache สามารถปรับขนาดได้อัตโนมัติ และสามารถ ",(0,r.jsx)(s.a,{href:"https://vercel.com/docs/infrastructure/data-cache",children:"shared ให้ส่วนต่างๆได้"})," ขึ้นอยู่กับแต่ละ platform"]}),"\n",(0,r.jsxs)(s.p,{children:["เรียนรู้เพิ่มเติมได้ที่ ",(0,r.jsx)(s.a,{href:"/docs/app/building-your-application/caching#data-cache",children:"Data Cache"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"revalidating-data",children:"Revalidating Data"}),"\n",(0,r.jsx)(s.p,{children:"Revalidation คือกระบวนการ update ข้อมูล โดยจะล้างข้อมูลใน Cache และทำการดึงข้อมูลล่าสุดเข้ามาใหม่ (re-fetching) การทำแบบนี้มีประโยชน์เมื่อข้อมูลของเรามีการเปลี่ยนแปลงและเราต้องการให้แสดงข้อมูลที่อัพเดทสุดท้ายออกมา"}),"\n",(0,r.jsx)(s.p,{children:"การทำ revalidated มีอยู่ 2 แนวทาง คือ"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Time-based revalidation"}),": จะทำการตรวจสอบข้อมูลตามช่วงเวลาที่กำหนดไว้ เหมาะสำหรับข้อมูลที่มีการเปลี่ยนแปลงน้อย"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"On-demand revalidation"}),": อยู่บนพื้นฐานการตรวจสอบข้อมูลแบบ Manually จะมีการตรวจสอบข้อมูลใหม่เมื่อมีเหตุการณ์ที่กำหนดไว้เกิดขึ้น เช่น การส่งฟอร์ม การทำ validation แบบ On-demand นี้ เราสามารถทำการ revalidate กลุ่มของข้อมูลที่เกี่ยวข้องกับ tag-based หรือ path-based นั้นๆได้ในครั้งเดียวกัน เหมาะสำหรับข้อมูลที่มีความต้องการให้แสดงทันทีหลังจากมีเหตุการณ์ที่กำหนดเกิดขึ้น เช่น การอัพเดทเนื้อหาจากระบบ CMS"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"time-based-revalidation",children:"Time-based Revalidation"}),"\n",(0,r.jsxs)(s.p,{children:["เราสามารถกำหนดช่วงเวลาในการทำ revalidate ได้โดยใช้ ",(0,r.jsx)(s.code,{children:"next.revalidate"})," ซึ่งเป็นตัวเลือกหนึ่งในการทำ ",(0,r.jsx)(s.code,{children:"fetch"})," โดยมีหน่วยเวลาเป็นวินาที"]}),"\n",(0,r.jsx)(s.pre,{"data-language":"js","data-theme":"default",children:(0,r.jsx)(s.code,{"data-language":"js","data-theme":"default",children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"fetch"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"https://..."'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { next"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { revalidate"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"3600"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" } });"})]})})}),"\n",(0,r.jsxs)(s.p,{children:["หากเราต้องการทำ revalidate ของ ",(0,r.jsx)(s.code,{children:"fetch"})," requests ทั้งหมดใน route segment เราสามารถใช้ ",(0,r.jsx)(s.a,{href:"/docs/app/api-reference/file-conventions/route-segment-config",children:"Segment Config Options"})," ได้"]}),"\n",(0,r.jsx)(s.pre,{"data-language":"jsx","data-theme":"default",filename:"layout.js | page.js",children:(0,r.jsx)(s.code,{"data-language":"jsx","data-theme":"default",children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"revalidate"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"3600"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"; "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// revalidate at most every hour"})]})})}),"\n",(0,r.jsxs)(s.p,{children:["ถ้าเราต้องการทำ fetch requests หลายๆอันใน statically rendered route และแต่ละอันมีความถี่ในการตรวจสอบข้อมูลต่างกัน เราจะใช้ช่วงเวลาที่น้อยที่สุดเป็นเวลาที่ใช้กำหนดการ request สำหรับ request ทั้งหมด แต่สำหรับ dynamic routes เราจะกำหนดให้การ ",(0,r.jsx)(s.code,{children:"fetch"})," request แต่ละอันแยกออกจากกัน"]}),"\n",(0,r.jsxs)(s.p,{children:["เรียนรู้ข้อมูลเพิ่มเติมได้ที่ ",(0,r.jsx)(s.a,{href:"/docs/app/building-your-application/caching#time-based-revalidation",children:"time-based revalidation"}),"."]}),"\n",(0,r.jsx)(s.h4,{id:"on-demand-revalidation",children:"On-demand Revalidation"}),"\n",(0,r.jsxs)(s.p,{children:["เราสามารถทำ revalidated on-demand ด้วย path (",(0,r.jsx)(s.a,{href:"/docs/app/api-reference/functions/revalidatePath",children:(0,r.jsx)(s.code,{children:"revalidatePath"})}),") หรือด้วย cache tag (",(0,r.jsx)(s.a,{href:"/docs/app/api-reference/functions/revalidateTag",children:(0,r.jsx)(s.code,{children:"revalidateTag"})}),") ใน ",(0,r.jsx)(s.a,{href:"/docs/app/building-your-application/data-fetching/server-actions-and-mutations",children:"Server Action"})," or ",(0,r.jsx)(s.a,{href:"/Next.js/01-Routing/01-11-Route-Handlers",children:"Route Handler"})," ได้ ดังนี้"]}),"\n",(0,r.jsxs)(s.p,{children:["ใน Next.js มีระบบ cache tagging สำหรับทำ invalidating ",(0,r.jsx)(s.code,{children:"fetch"})," requests ข้าม routes ได้"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["เมื่อเราใช้ ",(0,r.jsx)(s.code,{children:"fetch"})," เรามีตัวเลือกสำหรับการทำ tag cache entries จำนวน 1 tag หรือมากกว่า"]}),"\n",(0,r.jsxs)(s.li,{children:["หลังจากนั้นเราสามารถเรียกใช้ ",(0,r.jsx)(s.code,{children:"revalidateTag"})," เพื่อดึงข้อมูลทั้งหมดที่เกี่ยวข้องมาให้ update ใหม่อีกครั้ง"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["ตัวอย่างโค้ดข้างล่าง เราจะใช้ ",(0,r.jsx)(s.code,{children:"fetch"})," request เพื่อดึงข้อมูลของ tag ที่ชื่อว่า ",(0,r.jsx)(s.code,{children:"collection"})]}),"\n",(0,r.jsx)(s.pre,{"data-language":"tsx","data-theme":"default",filename:"app/page.tsx",children:(0,r.jsxs)(s.code,{"data-language":"tsx","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"default"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"async"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Page"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"() {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"res"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"fetch"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"https://..."'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { next"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { tags"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"collection"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"] } });"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"data"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"res"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".json"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// ..."})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.pre,{"data-language":"jsx","data-theme":"default",filename:"app/page.js",children:(0,r.jsxs)(s.code,{"data-language":"jsx","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"default"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"async"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Page"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"() {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"res"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"fetch"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"https://..."'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { next"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { tags"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ["}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"collection"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"] } });"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"data"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"res"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".json"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// ..."})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsxs)(s.p,{children:["เราสามารถ revalidate ข้อมูลของ tag ",(0,r.jsx)(s.code,{children:"collection"})," ของการ ",(0,r.jsx)(s.code,{children:"fetch"})," ด้วยการใช้ ",(0,r.jsx)(s.code,{children:"revalidateTag"})," ใน Server Action:"]}),"\n",(0,r.jsx)(s.pre,{"data-language":"ts","data-theme":"default",filename:"app/actions.ts",children:(0,r.jsxs)(s.code,{"data-language":"ts","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"use server"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { revalidateTag } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"next/cache"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"default"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"async"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"action"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"() {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"revalidateTag"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"collection"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.pre,{"data-language":"js","data-theme":"default",filename:"app/actions.js",children:(0,r.jsxs)(s.code,{"data-language":"js","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"use server"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { revalidateTag } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"next/cache"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"default"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"async"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"action"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"() {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"revalidateTag"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"collection"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsxs)(s.p,{children:["เรียนรู้เพิ่มเติมเกี่ยวกับ ",(0,r.jsx)(s.a,{href:"/docs/app/building-your-application/caching#on-demand-revalidation",children:"on-demand revalidation"}),"."]}),"\n",(0,r.jsx)(s.h4,{id:"error-handling-and-revalidation",children:"Error handling and revalidation"}),"\n",(0,r.jsx)(s.p,{children:"ถ้าเกิดข้อผิดพลาดขึ้นระหว่างการ validate ข้อมูล ระบบจะนำข้อมูลล่าสุดที่เก็บไว้ใน cache ก่อนที่จะเกิด error มาให้ใช้ และเมื่อมีการทำ validation อีกครั้ง ก็จะทำการดึงข้อมูลใหม่"}),"\n",(0,r.jsx)(s.h3,{id:"opting-out-of-data-caching",children:"Opting out of Data Caching"}),"\n",(0,r.jsxs)(s.p,{children:["หากเกิดเหตุการณ์ในกรณีต่อไปนี้ข้อมูลที่เกิดจากการทำ ",(0,r.jsx)(s.code,{children:"fetch"})," requests จะไม่ถูกเก็บไว้ใน cached :"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["ตั้งค่าเป็น ",(0,r.jsx)(s.code,{children:"cache: 'no-store'"})," สำหรัรบการทำ ",(0,r.jsx)(s.code,{children:"fetch"})," requests"]}),"\n",(0,r.jsxs)(s.li,{children:["ตั้งค่าเป็น ",(0,r.jsx)(s.code,{children:"revalidate: 0"})," เมื่อทำการ ",(0,r.jsx)(s.code,{children:"fetch"})," requests แต่ละรอบ"]}),"\n",(0,r.jsxs)(s.li,{children:["ทำ ",(0,r.jsx)(s.code,{children:"fetch"})," request ใน Router Handler เมื่อใช้ ",(0,r.jsx)(s.code,{children:"POST"})," method"]}),"\n",(0,r.jsxs)(s.li,{children:["ทำ ",(0,r.jsx)(s.code,{children:"fetch"})," request หลังจากใช้ ",(0,r.jsx)(s.code,{children:"headers"})," or ",(0,r.jsx)(s.code,{children:"cookies"})]}),"\n",(0,r.jsxs)(s.li,{children:["ตั้งค่าเป็น ",(0,r.jsx)(s.code,{children:"const dynamic = 'force-dynamic'"})," ใน route segment"]}),"\n",(0,r.jsxs)(s.li,{children:["ค่าเริ่มต้นของ ",(0,r.jsx)(s.code,{children:"fetchCache"})," route segment ถูกตั้งค่าให้ไม่มีการเก็บ cache"]}),"\n",(0,r.jsxs)(s.li,{children:["การทำ ",(0,r.jsx)(s.code,{children:"fetch"})," request ที่ใช้ ",(0,r.jsx)(s.code,{children:"Authorization"})," หรือ ",(0,r.jsx)(s.code,{children:"Cookie"})," headers จะไม่มีการทำ cache ใน component tree"]}),"\n"]}),"\n",(0,r.jsxs)(s.h4,{id:"individual-fetch-requests",children:["Individual ",(0,r.jsx)(s.code,{children:"fetch"})," Requests"]}),"\n",(0,r.jsxs)(s.p,{children:["หากเราไม่ต้องการให้เก็บ cache ในการ ",(0,r.jsx)(s.code,{children:"fetch"})," แต่ละครั้ง เราสามารถตั้งค่า ",(0,r.jsx)(s.code,{children:"cache"})," ใน ",(0,r.jsx)(s.code,{children:"fetch"})," ให้เป็น ",(0,r.jsx)(s.code,{children:"'no-store'"})," การทำแบบนี้จะเป็นการดึงข้อมูลแบบ dynamic"]}),"\n",(0,r.jsx)(s.pre,{"data-language":"js","data-theme":"default",filename:"layout.js | page.js",children:(0,r.jsx)(s.code,{"data-language":"js","data-theme":"default",children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"fetch"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"https://..."'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { cache"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"no-store"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" });"})]})})}),"\n",(0,r.jsxs)(s.p,{children:["สามารถดูตัวเลื่อกที่มีไว้สำหรับตั้งค่า ",(0,r.jsx)(s.code,{children:"cache"})," ใน ",(0,r.jsxs)(s.a,{href:"/docs/app/api-reference/functions/fetch",children:[(0,r.jsx)(s.code,{children:"fetch"})," API reference"]}),"."]}),"\n",(0,r.jsxs)(s.h4,{id:"multiple-fetch-requests",children:["Multiple ",(0,r.jsx)(s.code,{children:"fetch"})," Requests"]}),"\n",(0,r.jsxs)(s.p,{children:["ถ้าเราต้องการทำ ",(0,r.jsx)(s.code,{children:"fetch"})," requests หลายๆอันใน route segment (เช่น ใน Layout or Page) เราสามาตั้งค่าการทำงานของ cache ในการดึงข้อมูลทั้งหมดที่มีอยู่ใน segment โดยใช้ ",(0,r.jsx)(s.a,{href:"/docs/app/api-reference/file-conventions/route-segment-config",children:"Segment Config Options"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["แต่เราก็แนะนำให้ตั้งค่าที่ต้องการของ ",(0,r.jsx)(s.code,{children:"fetch"})," request แต่ละอัน เพื่อให้สามารถควบคุมได้ดีมากขึ้น"]}),"\n",(0,r.jsx)(s.h2,{id:"fetching-data-on-the-server-with-third-party-libraries",children:"Fetching data on the Server with third-party libraries"}),"\n",(0,r.jsxs)(s.p,{children:["ในกรณีที่คุณใช้ไลบรารีจากภายนอกที่ไม่รองรับการทำงานของฟังก์ชัน fetch (ตัวอย่างเช่นฐานข้อมูล, CMS, หรือ ORM client) คุณสามารถกำหนดการทำงานของแคชและการ revalidating ของ request เหล่านั้นได้ โดยใช้ ",(0,r.jsx)(s.a,{href:"/docs/app/api-reference/file-conventions/route-segment-config",children:"Route Segment Config Option"})," และฟังก์ชัน cache ของ React"]}),"\n",(0,r.jsxs)(s.p,{children:["การที่ข้อมูลจะถูกแคชหรือไม่นั้น ขึ้นอยู่กับว่า route segment ของเราเป็นแบบ ",(0,r.jsx)(s.a,{href:"/docs/app/building-your-application/rendering/server-components#server-rendering-strategies",children:"statically หรือ dynamically rendered"}),"\nหากเป็นแบบ static (ซึ่งเป็นค่าเริ่มต้น) ข้อมูลจะถูกเก็บไว้โดย cache และ ทำ validate ในส่วนของ route segment นั้น แต่ ถ้าหากว่าเป็นแบบ dynamic ข้อมูลจะไม่ถูกทำ cache เก็บไว้ และจะทำการดึงข้อมูลใหม่ทุกครั้งที่มีการ request และ render segment นั้น"]}),"\n",(0,r.jsxs)(s.p,{children:["คุณสามารถทดลองใช้ฟังก์ชัน ",(0,r.jsxs)(s.a,{href:"/docs/app/api-reference/functions/unstable_cache",children:[(0,r.jsx)(s.code,{children:"unstable_cache"})," API"]})," ซึ่งอยู่ระหว่างการทดลองได้"]}),"\n",(0,r.jsx)(s.h3,{id:"example",children:"Example"}),"\n",(0,r.jsx)(s.p,{children:"ตัวอย่างการใช้งาน"}),"\n",(0,r.jsx)(s.p,{children:"ในตัวอย่างข้างล่าง:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["ฟังก์ชัน ",(0,r.jsx)(s.code,{children:"cache"})," ใน React จะถูกใช้เพื่อทำ ",(0,r.jsx)(s.a,{href:"/docs/app/building-your-application/caching#request-memoization",children:"memoize"})," ให้กับข้อมูลที่ดึงมา"]}),"\n",(0,r.jsxs)(s.li,{children:["เราจะตั้งค่า ",(0,r.jsx)(s.code,{children:"revalidate"})," ให้เท่ากับ ",(0,r.jsx)(s.code,{children:"3600"})," ใน Layout และ Page segments หมายความว่า ข้อมุลจะถูก cache เก็บไว้ และ ทำการ revalidation ทุกหนึ่งชั่วโมง"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{"data-language":"ts","data-theme":"default",filename:"app/utils.ts",children:(0,r.jsxs)(s.code,{"data-language":"ts","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { cache } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"react"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"getItem"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"cache"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"async"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" (id"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"string"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"item"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"db"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"item"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".findUnique"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"({ id });"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" item;"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"});"})})]})}),"\n",(0,r.jsx)(s.pre,{"data-language":"js","data-theme":"default",filename:"app/utils.js",children:(0,r.jsxs)(s.code,{"data-language":"js","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { cache } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"react"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"getItem"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"cache"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"async"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" (id) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"item"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"db"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"item"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".findUnique"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"({ id });"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" item;"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"});"})})]})}),"\n",(0,r.jsxs)(s.p,{children:["ถึงแม้ว่าฟังก์ชัน ",(0,r.jsx)(s.code,{children:"getItem"})," จะถูกเรียก 2 ครั้ง แต่จะมีการดึงข้อมูลจากฐานข้อมูลเพียงครั้งเดียวเท่านั้น"]}),"\n",(0,r.jsx)(s.pre,{"data-language":"tsx","data-theme":"default",filename:"app/item/[id]/layout.tsx",children:(0,r.jsxs)(s.code,{"data-language":"tsx","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { getItem } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"@/utils/get-item"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"revalidate"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"3600"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"; "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// revalidate the data at most every hour"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"default"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"async"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Layout"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"({"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  params: { id }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  params"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { id"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"string"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" };"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}) {"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"item"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"getItem"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(id);"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// ..."})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.pre,{"data-language":"jsx","data-theme":"default",filename:"app/item/[id]/layout.js",children:(0,r.jsxs)(s.code,{"data-language":"jsx","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { getItem } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"@/utils/get-item"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"revalidate"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"3600"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"; "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// revalidate the data at most every hour"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"default"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"async"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Layout"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"({ params: { id } }) {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"item"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"getItem"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(id);"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// ..."})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.pre,{"data-language":"tsx","data-theme":"default",filename:"app/item/[id]/page.tsx",children:(0,r.jsxs)(s.code,{"data-language":"tsx","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { getItem } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"@/utils/get-item"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"revalidate"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"3600"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"; "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// revalidate the data at most every hour"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"default"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"async"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Page"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"({"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  params: { id }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  params"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { id"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"string"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" };"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}) {"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"item"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"getItem"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(id);"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// ..."})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.pre,{"data-language":"jsx","data-theme":"default",filename:"app/item/[id]/page.js",children:(0,r.jsxs)(s.code,{"data-language":"jsx","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { getItem } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"@/utils/get-item"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"revalidate"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"3600"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"; "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// revalidate the data at most every hour"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"default"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"async"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Page"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"({ params: { id } }) {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"item"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"getItem"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(id);"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// ..."})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.h2,{id:"fetching-data-on-the-client-with-route-handlers",children:"Fetching Data on the Client with Route Handlers"}),"\n",(0,r.jsx)(s.p,{children:"การดึงข้อมูลบน client ด้วย Route Handlers"}),"\n",(0,r.jsxs)(s.p,{children:["ถ้าคุณต้องการดึงข้อมูลใน component บน client คุณสามารถเรียกใช้\n",(0,r.jsx)(s.a,{href:"route-handlers",children:"Route Handler"})," จาก client ได้ ตัว Route Handlers จะทำงานในฝั่ง server และส่งข้อมูลคืนไปให้ฝั่งทาง client ประโยชน์ของวิธีนี้คือ จะไม่เปิดเผยข้อมูลสำคัญ เช่น API tokens ให้คนอื่นในฝั่ง client เห็น"]}),"\n",(0,r.jsxs)(s.p,{children:["ดูข้อมูลเพิ่มเติมได้ที่ ",(0,r.jsx)(s.a,{href:"/Next.js/01-Routing/01-11-Route-Handlers",children:"Route Handler"})]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Server Components and Route Handlers"})}),"\n",(0,r.jsx)(s.p,{children:"หาก Server Components ทำการ render บน server คุณไม่จำเป็นต้องเรียก Route Handler จาก Server Component เพื่อดึงข้อมูล เพราะคุณสามารถดึงข้อมูลโดยตรงภายใน Server Component ได้เลย"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"fetching-data-on-the-client-with-third-party-libraries",children:"Fetching Data on the Client with third-party libraries"}),"\n",(0,r.jsx)(s.p,{children:"การดึงข้อมูลบน client ด้วย libraries ภายนอก"}),"\n",(0,r.jsxs)(s.p,{children:["เราสามารถดึงข้อมูลบน client ด้วย libraries ภายนอกได้ เช่น ",(0,r.jsx)(s.a,{href:"https://swr.vercel.app/",children:"SWR"})," หรือ ",(0,r.jsx)(s.a,{href:"https://tanstack.com/query/latest",children:"TanStack Query"})," libraries เหล่านี้จะมี APIs ของตัวเองสำหรับการทำ memoizing requests / caching / revalidating และ mutating data"]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Future APIs"}),":"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"use"})," เป็นฟังก์ชันหนึ่งของ React ",(0,r.jsx)(s.strong,{children:"ทำหน้าที่รับและจัดการกับ promise"})," ที่ส่งข้อมูลกลับมาจากฟังก์ชัน ไม่แนะนำให้ใช้ใช้ ",(0,r.jsx)(s.code,{children:"use"})," ครอบ ",(0,r.jsx)(s.code,{children:"fetch"})," ใน Client Components เพราะอาจจะทำให้เกิดการ render ซ้ำซ้อนหลายครั้ง"]}),"\n"]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:["สามารถเรียนรู้เพิ่มเติมการใช้ ",(0,r.jsx)(s.code,{children:"use"})," ได้ใน ",(0,r.jsx)(s.a,{href:"https://react.dev/reference/react/use",children:"React docs"}),"."]}),"\n"]})]})}let c={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,o.a)(),e.components);return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(_createMdxContent,{...e})}):_createMdxContent(e)},pageOpts:{filePath:"pages/Next.js/02-data-fetching/02-01-fetching-caching-and-revalidating.mdx",route:"/Next.js/02-data-fetching/02-01-fetching-caching-and-revalidating",frontMatter:{title:"Data Fetching, Caching, and Revalidating",description:"Learn how to fetch, cache, and revalidate data in your Next.js application."},timestamp:1705385478e3,pageMap:[{kind:"Folder",name:"Expressjs",route:"/Expressjs",children:[{kind:"Meta",data:{express:{title:"Express Home"},"--------":{type:"separator"},"getting-started":{title:"การสร้าง server ด้วย Express.js"},"express-application":"Express Application"}},{kind:"MdxPage",name:"express-application",route:"/Expressjs/express-application",frontMatter:{title:"Express Application",description:"Express Application"}},{kind:"MdxPage",name:"express",route:"/Expressjs/express"},{kind:"MdxPage",name:"getting-started",route:"/Expressjs/getting-started",frontMatter:{title:"การสร้าง server ด้วย Express.js",description:"การสร้างแอปพลิเคชั่นด้วย Express.js"}}]},{kind:"Folder",name:"Next.js",route:"/Next.js",children:[{kind:"MdxPage",name:"00-00-getting-started",route:"/Next.js/00-00-getting-started",frontMatter:{title:"00-00 Next.js Getting Started",description:"เริ่มต้นกับ Next.js"}},{kind:"MdxPage",name:"00-01-Installation",route:"/Next.js/00-01-Installation",frontMatter:{title:"00-01 การติดตั้ง Next.js (Installation)",description:"การติดตั้ง Next.js"}},{kind:"MdxPage",name:"00-02-Project-Structure",route:"/Next.js/00-02-Project-Structure",frontMatter:{title:"00-02 โครงสร้างไฟล์และโฟลเดอร์ใน Next.js (Next.js Project Structure)",description:"การติดตั้ง Next.js"}},{kind:"Folder",name:"01-Routing",route:"/Next.js/01-Routing",children:[{kind:"MdxPage",name:"01-00-App-Router",route:"/Next.js/01-Routing/01-00-App-Router",frontMatter:{title:"01-00 App Router",description:"บทนำเข้าสู่ App Router"}},{kind:"MdxPage",name:"01-01-Routing-Fundamentals",route:"/Next.js/01-Routing/01-01-Routing-Fundamentals",frontMatter:{title:"01-01 Routing Fundamentals",description:"ความรู้พื้นฐานเกี่ยวกับ Routing"}},{kind:"MdxPage",name:"01-02-Defining-Routes",route:"/Next.js/01-Routing/01-02-Defining-Routes",frontMatter:{title:"01-02 Defining Routes",description:"การกำหนด Route"}},{kind:"MdxPage",name:"01-03-Pages-and-Layouts",route:"/Next.js/01-Routing/01-03-Pages-and-Layouts",frontMatter:{title:"01-03 การสร้าง Pages และ Layouts",description:"การสร้าง Pages และ Layouts ด้วย TypeScript"}},{kind:"MdxPage",name:"01-04-Linking-and-Navigating",route:"/Next.js/01-Routing/01-04-Linking-and-Navigating",frontMatter:{title:"01-04 Linking and Navigating",description:"การสร้าง Link และ Navigation ใน Next.js"}},{kind:"MdxPage",name:"01-05-Route-Groups",route:"/Next.js/01-Routing/01-05-Route-Groups",frontMatter:{title:"01-05 การจัดกลุ่มของ Routes (Route Groups)",description:"การจัดกลุ่มของ Routes ใน App Router ของ Next.js"}},{kind:"MdxPage",name:"01-06-Dynamic-Routes",route:"/Next.js/01-Routing/01-06-Dynamic-Routes",frontMatter:{title:"01-06 Dynamic Routes",description:"การจัดการ Dynamic Routes ใน App Router ของ Next.js"}},{kind:"MdxPage",name:"01-07-Loading-UI-and-Streaming",route:"/Next.js/01-Routing/01-07-Loading-UI-and-Streaming",frontMatter:{title:"01-07 Loading UI and Streaming",description:"การใช้ Loading UI และ Streaming ใน App Router ของ Next.js"}},{kind:"MdxPage",name:"01-08-Error-Handling",route:"/Next.js/01-Routing/01-08-Error-Handling",frontMatter:{title:"01-08 Error Handling",description:"การจัดการกับ Error ใน App Router ของ Next.js"}},{kind:"MdxPage",name:"01-09-Parallel-Routes",route:"/Next.js/01-Routing/01-09-Parallel-Routes",frontMatter:{title:"01-09 Parallel Routes",description:"การทำงานแบบ Parallel Routes ใน App Router ของ Next.js"}},{kind:"MdxPage",name:"01-10-Intercepting-Routes",route:"/Next.js/01-Routing/01-10-Intercepting-Routes",frontMatter:{title:"01-10 Intercepting Routes",description:"การทำงานแบบ Intercepting Routes ใน App Router ของ Next.js"}},{kind:"MdxPage",name:"01-11-Route-Handlers",route:"/Next.js/01-Routing/01-11-Route-Handlers",frontMatter:{title:"01-11 Route Handlers",description:"การจัดการ Routes (Route Handlers) ใน App Router ของ Next.js"}},{kind:"MdxPage",name:"01-12-Middleware",route:"/Next.js/01-Routing/01-12-Middleware",frontMatter:{title:"01-12 Middleware",description:"การใช้ Middleware เพื่อ run code ก่อนที่ request จะทำงานเสร็จใน App Router ของ Next.js"}},{kind:"MdxPage",name:"01-13-colocation",route:"/Next.js/01-Routing/01-13-colocation",frontMatter:{title:"01-13 Project Organization and File Colocation",description:"Learn how to organize your Next.js project and colocate files."}},{kind:"MdxPage",name:"01-14-internationallization",route:"/Next.js/01-Routing/01-14-internationallization",frontMatter:{title:"01-14 Internationalization",description:"Add support for multiple languages with internationalized routing and localized content."}},{kind:"Meta",data:{"01-00-App-Router":"01-00 App Router","01-01-Routing-Fundamentals":"01-01 Routing Fundamentals","01-02-Defining-Routes":"01-02 Defining Routes","01-03-Pages-and-Layouts":"01-03 การสร้าง Pages และ Layouts","01-04-Linking-and-Navigating":"01-04 Linking and Navigating","01-05-Route-Groups":"01-05 การจัดกลุ่มของ Routes (Route Groups)","01-06-Dynamic-Routes":"01-06 Dynamic Routes","01-07-Loading-UI-and-Streaming":"01-07 Loading UI and Streaming","01-08-Error-Handling":"01-08 Error Handling","01-09-Parallel-Routes":"01-09 Parallel Routes","01-10-Intercepting-Routes":"01-10 Intercepting Routes","01-11-Route-Handlers":"01-11 Route Handlers","01-12-Middleware":"01-12 Middleware","01-13-colocation":"01-13 Project Organization and File Colocation","01-14-internationallization":"01-14 Internationalization"}}]},{kind:"Folder",name:"02-data-fetching",route:"/Next.js/02-data-fetching",children:[{kind:"MdxPage",name:"02-01-fetching-caching-and-revalidating",route:"/Next.js/02-data-fetching/02-01-fetching-caching-and-revalidating",frontMatter:{title:"Data Fetching, Caching, and Revalidating",description:"Learn how to fetch, cache, and revalidate data in your Next.js application."}},{kind:"MdxPage",name:"02-02-server-actions-and-mutations",route:"/Next.js/02-data-fetching/02-02-server-actions-and-mutations",frontMatter:{title:"Server Actions and Mutations",description:"Learn how to handle form submissions and data mutations with Next.js."}},{kind:"MdxPage",name:"02-03-patterns",route:"/Next.js/02-data-fetching/02-03-patterns",frontMatter:{title:"Patterns and Best Practices",description:"Learn about common data fetching patterns in React and Next.js."}},{kind:"MdxPage",name:"index",route:"/Next.js/02-data-fetching",frontMatter:{title:"Data Fetching",description:"Learn how to fetch, cache, revalidate, and mutate data with Next.js."}},{kind:"Meta",data:{index:"Data Fetching","02-01-fetching-caching-and-revalidating":"Data Fetching, Caching, and Revalidating","02-03-patterns":"Patterns and Best Practices","02-02-server-actions-and-mutations":"Server Actions and Mutations"}}]},{kind:"Meta",data:{home:{title:"back to TheModCoding",type:"page",href:"https://themodcoding.vercel.app",newWindow:!0},"00-00-getting-started":"00-00 Next.js Getting Started","00-01-Installation":"00-01 การติดตั้ง Next.js (Installation)","00-02-Project-Structure":"00-02 โครงสร้างไฟล์และโฟลเดอร์ใน Next.js (Next.js Project Structure)"}}]},{kind:"Meta",data:{index:{title:"Home",type:"page"},"Next.js":{title:"Next.js",type:"page"},Expressjs:{title:"Express.js",type:"page"},themodcoding:{title:"TheModCoding",type:"page",href:"https://themodcoding.vercel.app",newWindow:!0}}},{kind:"MdxPage",name:"index",route:"/"}],flexsearch:{codeblocks:!0},title:"Data Fetching, Caching, and Revalidating",headings:a},pageNextRoute:"/Next.js/02-data-fetching/02-01-fetching-caching-and-revalidating",nextraLayout:t.ZP,themeConfig:l.Z};s.default=(0,i.j)(c)},9812:function(e,s,n){"use strict";var r=n(5893);n(7294);let i={logo:(0,r.jsx)("span",{children:"document.ModTdin"}),project:{link:"https://github.com/Tuengdin/themoddocu"},docsRepositoryBase:"https://github.com/shuding/nextra-docs-template",footer:{text:"document.ModTdin.com"}};s.Z=i}},function(e){e.O(0,[774,361,888,179],function(){return e(e.s=5453)}),_N_E=e.O()}]);